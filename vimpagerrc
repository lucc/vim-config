" ~/.vimpagerrc file by luc
" vim: ft=vim

" Fix the runtimepath to conform to XDG a little bit.
set runtimepath+=~/.config/vim
call luc#xdg#runtimepath()

" Set a flag wheather we are viewing a man page.
let s:man = index(g:vimpager_ptree, 'man') != -1

" Load some man page plugin code if we are viewing a man page.
if s:man
  runtime plugin/manpageviewPlugin.vim
  runtime after/plugin/manpageviewPlugin.vim
endif

function LucCallGvimWithMan()
  let l:count = index(g:vimpager_ptree, 'man')
  if l:count == -1
    echohl ErrorMsg
    echomsg 'Are you sure you are viewing a manpage? I am not.'
    echohl None
    return
  endif
  let l:count = len(g:vimpager_ptree) - l:count
  let pid = getpid()
  while l:count != 0
    let pid = system('ps -o ppid= '. pid)[0:-2]
    let l:count -= 1
  endwhile
  let arg = split(system('ps -o args= ' . pid))[-1]
  call system('transparent-gvim.sh --man ' . arg . '&')
  quit
endfunction

nmap <silent> S :call LucCallGvimWithMan()<CR>

set mouse=a
set viminfo=
set incsearch
set ignorecase
set smartcase

" this works, but is crazy
"let vimpager_use_gvim = 1

if !empty($VIMPAGER_NO_PASSTHROUGH)
  let vimpager_passthrough = 0
endif

"if $TERM_PROGRAM == 'iTerm.app'
if !has('gui_running')
  set t_Co=256
endif
set rtp+=~/.local/share/vim/bundle/vim-colors-solarized
set bg=dark
colorscheme solarized

" fix error with powerline plugin
let g:powerline_loaded = 1
