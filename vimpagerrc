" ~/.vimpagerrc file by luc
" vim: ft=vim

function LucCallGvimWithMan()
  let l:count = index(g:vimpager_ptree, 'man')
  if l:count == -1
    echohl ErrorMsg
    echomsg 'Are you sure you are viewing a manpage? I am not.'
    echohl None
    return
  endif
  let l:count = len(g:vimpager_ptree) - l:count
  let pid = getpid()
  while l:count != 0
    let pid = system('ps -o ppid= '. pid)[0:-2]
    let l:count -= 1
  endwhile
  let arg = split(system('ps -o args= ' . pid))[-1]
  call system('transparent-gvim.sh --man ' . arg . '&')
  quit
endfunction

nmap <silent> S :call LucCallGvimWithMan()<CR>

set noloadplugins
set mouse=a
set viminfo=
set incsearch
set ignorecase
set smartcase

" this works, but is crazy
"let vimpager_use_gvim = 1
let vimpager_passthrough = 1

if $TERM_PROGRAM == 'iTerm.app'
  set t_Co=256
endif
set rtp+=~/.vim/bundle/vim-colors-solarized
set bg=dark
colorscheme solarized
