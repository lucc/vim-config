#!/bin/zsh

function all-readable () {
  for file; do
    if [[ ! -r $file ]]; then
      return 1
    fi
  done
  return 0
}

function find-files-and-patterns () {
  for arg; do
    if [[ -f $arg ]]; then
      files=($files $arg)
    else
      pattern=$pattern$arg
    fi
  done
  # now $files and $pattern could be used like this:
  # FINDINIT=$pattern nvim -c 'call luc#findinit#run()' -- $files
}

if [[ $# -eq 0 ]]; then
  nvim -c 'call luc#findinit#run("")'
elif all-readable $@; then
  nvim $@
else
  FINDINIT=${(j::)*} nvim -c 'call luc#findinit#from_env()'
fi
